(()=>{var t,e,o=[],i=[],a=!1,n={editMode:!1,newMode:a},l=[],d={},s=[];const r=()=>{g();let t="";t+="<button type='button' style='border-radius: 2px; position:relative; left:19px' class='btn btn-primary'  id='NewAudits2' data-toggle='tooltip' data-placement='bottom' title='Define a New Program and Map its Curriculum Outcomes'",t+="style='border-radius:2px; position:relative; left:10px; ' ><div style='font-size: 18px'>Create a New Program</div> </button>",t+="<table border=0 width=100%>";for(var e=1;e<o[0].length;e++){var i=(e-1)%2,a=Math.floor(e/2);let n=o[0][e],l=o[1][e];o[2][e],t+=0==i?a>0?"</tr><tr>":"<tr>":"",t+="<td height='200px' width='400px' style='padding:0 20px 0 20px; border: 0px solid black '>",t+="<div class='shadowbox'>",t+="<table border=0 id='tablelist'><tr><td colspan=3 style='width:400px'>",t+="<div class='rounddiv' style='display:block; margin-top:1px'>",t+="<span style='position:relative; left:10px'>",t+=n+"</span>",t+="</div>",t+="</td>",t+="</tr><tr>",t+="<td style='width:20px'></td>",t+="<td style='width:380px; word-wrap:break-word'>"+l+"</td>",t+="<td>",t+="<button type='button' data-c="+e+" class='btn btn-outline-primary btn previewProgButt' data-dismiss='modal' aria-label='Preview'>Preview</button>",t+="<button type='button' data-c="+e+" class='btn btn-outline-primary btn confirmProgButt' data-dismiss='modal' aria-label='Choose'>Manage</button>",t+="</td>",t+="</tr></table>",t+="</div>",t+="</td>",t+=2==e||2==o[0].length?"<td id='coursePreview'rowspan='0' valign='top' style='padding:0 20px 0 20px; width:calc(100% - 150px)' ></td>":""}t+="</tr></table>",$("#programListTable").html(t),$("#newLoginOptions").css("display","none"),$("#confirmedCourseInfo").css("display","none"),$("#coursePreview").html(L()),T(),B("mainlistme"),$(".previewProgButt").click((function(t){t.preventDefault(),t.stopImmediatePropagation();let e=this.dataset.c;u(e)})),$(".confirmProgButt").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),c(this.dataset.c)})),$(".confirmProgButt").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),c(this.dataset.c)})),document.getElementById("NewAudits2").onclick=function(t){t.preventDefault(),t.stopImmediatePropagation(),w()}};function c(e){h({pstate:"confirmProgram"},"","?confirmProgram"),null!=e&&(t=e),p()}const p=()=>{k(),g(),$("#programListTable").html(""),$("#newLoginOptions").css("display","none"),$("#confirmedCourseInfo").css("display","block"),$("#confirmedJumboDisplay").html(L(t)),T(),$("#jumboEditButtons").css("display","block"),$("#menubuttons").css("display","block"),$(".confirmBut").css("display","none"),B("programModeMe"),u(t),E(5)},m=()=>{$("#newLoginOptions").css("display","none"),$("#confirmedCourseInfo").css("display","block"),$(".confirmBut").css("display","none"),t=o[0].length,$("#confirmedJumboDisplay").html(L(t)),T(),u(t),function(t){I("new"),b(),$("#saveCancel").css("display","block"),$(".confirmBut").css("display","none");let e=["(Enter Title: eg Robotics)","(Summary Text)","(Further Details)","(Year Level)"];$(".editable").each((function(t){$(this).html("<textarea style='font-size:24px'  rows='2' id='texta_id"+t+"'' cols='30'>"+e[t]+"</textarea>")}));let o=i.reduce((function(t,e){return t+"<option value="+e.code+" >"+e.txt+"</option>"}),"<select style='font-size: 24px;'><option value=-1>Select Curriculum</option>")+"</select>";$("#ddeditable").html(o),$("#instruction1").html("Edit")}()},u=e=>{t=e,$("#h1").html(o[0][e]),$("#h2a").html(o[1][e]),$("#h2b").html(o[2][e]),$("#h3").html(o[3][e]),$("#ddeditable").html(o[4][e]),$("#jumboCourse").css("display","block")};function g(t){v(""),$("#confirmedCourseInfo").css("display","none"),$("#programListTable").html(""),$("#newLoginOptions").css("display","none"),$("#exploreMenuItems").css("display","none"),$("#reportMenuItems").css("display","none")}function b(){v(""),$("#confirmedCourseInfo").css("display","block")}function f(t,o,i,a,n,l){k();let s=e.uid;var r;(d={progid:t,curricKey:a,rootText:n,uid:s}).opts=l,r=d,$("#dyndiv").data("progid",r.progid),$("#dyndiv").data("curricKey",r.curricKey),$("#dyndiv").data("rootText",r.rootText),$("#dyndiv").data("uid",r.uid),$("#dyndiv").data("opts",JSON.stringify(r.opts)),v(""),v("sunburst.html")}function y(){$("#navb").css("display","block"),$(".herobanner").css("display","none"),v(""),$("#programListTable").html(""),$("#confirmedCourseInfo").css("display","none"),$("#newLoginOptions").css("display","block"),$("#logOutLink").css("visibility","visible")}function v(t){console.log("params in  ifrload",d,"src:",t),window.__pz__=d,""!=t&&(console.log("ifr loading "+t),$.get(t,(function(t){$("#dyndiv").html(t)}))),""==t&&$("#dyndiv").empty()}function h(t,e,o){history.pushState(t,e,""),l.push({state:t,title:t.pstate,url:o})}$(($("#actions a").click((function(t){t.preventDefault(),t.stopImmediatePropagation();var e=$(this).text();$("#actionbutton").text(e),novtable()})),$('[data-toggle="tooltip"]').tooltip({delay:{show:300,hide:0}}),$("#saveAudit").click((function(e){e.stopImmediatePropagation(),C(t),a=!1})),$("#deleteProgramMapping").click((function(t){t.stopImmediatePropagation(),$("#confirmResetModal").modal()})),$("#deleteYes").click((function(a){var n;a.stopImmediatePropagation(),$("#confirmDeleteModal").modal("hide"),n=t,$("#pleaseWaitModal").on("hidden.bs.modal",(function(t){console.log("closed event")})),$("#pleaseWaitModal").modal(),E(0),$.getJSON(M+"?callback=?",{method:"deleteAudit",progid:s[n],uid:e.uid},(function(t){var e;o=(e=t).auditBlock,s=o.shift(),i=e.currics,r(),$("#pleaseWaitModal").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()})),document.getElementById("navhtable").innerHTML=""})),$("#deleteNo").click((function(t){t.stopImmediatePropagation(),$("#confirmDeleteModal").modal("hide")})),$("#resetYes").click((function(o){var i;o.stopImmediatePropagation(),$("#confirmResetModal").modal("hide"),i=t,console.log("resetting",s[i]),$.getJSON(M+"?callback=?",{method:"resetAudit",progid:s[i],uid:e.uid},(function(t){}))})),$("#resetNo").click((function(t){t.stopImmediatePropagation(),$("#confirmResetModal").modal("hide")})),$("#loginbutton").click((function(t){t.stopImmediatePropagation(),$("#loginModal").modal()})),$("#LoginGo").click((function(t){t.stopImmediatePropagation(),function(){var t=document.getElementById("ufrm").checkValidity(),a=document.getElementById("pfrm").checkValidity();if($("#ufrm").css("border-color",t?"#CCCCCC":"#CC0000"),$("#pfrm").css("border-color",a?"#CCCCCC":"#CC0000"),t&&a){$("#loginspinner").css("display","block");var l={u:document.getElementById("ufrm").value,p:document.getElementById("pfrm").value};$.getJSON(M+"?callback=?",{method:"L1",c1:JSON.stringify(l)},(function(t){$("#loginspinner").css("display","none"),$(".modal-body input").val(""),$("#loginModal").modal("hide"),t.status?(h({pstate:"LoggedIn"},"","?LoggedIn"),$("#navUserTitle").text(t.userTitle),e=t,document.getElementById("preloading").innerHTML="loading...",$.getJSON(M+"?callback=?",{method:"ablock",uid:e.uid},(function(t){var e;document.getElementById("preloading").innerHTML="",$("#ExistingAudits").prop("disabled",!1),$("#ExistingAudits").css("opacity",1),$("#NewAudits").prop("disabled",!1),$("#NewAudits").css("opacity",1),o=(e=t).auditBlock,s=o.shift(),i=e.currics,D(),n={editMode:!1,newMode:!1}})),y(),$("#ExistingAudits").prop("disabled",!0),$("#ExistingAudits").css("opacity",.5),$("#NewAudits").prop("disabled",!0),$("#NewAudits").css("opacity",.5)):$("#invalidLogin").modal()}))}}()})),$("#LoginCancel").click((function(t){t.stopImmediatePropagation(),$("#loginModal").modal("hide"),$("#loginspinner").css("display","none"),$(".modal-body input").val("")})),$("#registerlink").click((function(t){t.stopImmediatePropagation(),$("#registerModal").modal()})),$("#RegistrationGo").click((function(t){t.stopImmediatePropagation(),function(){if(document.getElementById("interestForm").checkValidity()){var t={name:document.getElementById("namefrm").value,school:document.getElementById("schoolfrm").value,email:document.getElementById("emailfrm").value,role:document.getElementById("rolefrm").value};$.getJSON(M+"?callback=?",{method:"registerInterest",details:JSON.stringify(t)},(function(t){})),$("#registerModal").modal("hide"),$(".modal-body input").val("")}}()})),$("#RegistrationCancel").click((function(t){t.stopImmediatePropagation(),$("#registerModal").modal("hide"),$(".modal-body input").val("")})),$("#NewAudits").click((function(t){t.stopImmediatePropagation(),w()})),$("#ExistingAudits").click((function(t){t.stopImmediatePropagation(),h({pstate:"listPrograms"},"","?listPrograms"),r(),E(0)})),$("#mainlistme").click((function(t){t.stopImmediatePropagation(),h({pstate:"listPrograms"},"","?listPrograms"),r(),B("mainlistme")})),$("#auditme").click((function(o){o.preventDefault(),o.stopImmediatePropagation(),h({pstate:"audit"},"","?audit"),B("auditme"),g(),function(t){k();let o=e.uid;d={a1code:"_root",progid:s[t],uid:o},v("maptool.html")}(t)})),$("#tabletoolme").click((function(o){o.preventDefault(),o.stopImmediatePropagation(),h({pstate:"tablemap"},"","?tablemap"),B("tablemaptoolme"),g(),function(t){k();let o=e.uid;d={a1code:"_root",progid:s[t],uid:o},v("tablemaptool.html")}(t)})),$("#programModeMe").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),p()})),$("#exploreme").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),g(),h({pstate:"exploreMenu"},"","?exploreMenu"),g(),$("#programListTable").html(""),$("#newLoginOptions").css("display","none"),$("#exploreMenuItems").css("display","block"),B("exploreme")})),$("#ExploreSun").click((function(e){e.preventDefault(),e.stopImmediatePropagation(),g();let i=t,a=(o[1][i],o[4][i],o[5][i]),n=o[6][i];f(s[i],0,0,a,n,{isSun:!0})})),$("#ExploreMoon").click((function(e){e.preventDefault(),e.stopImmediatePropagation(),g();let i=t,a=(o[1][i],o[4][i],o[5][i]),n=o[6][i];f(s[i],0,0,a,n,{isSun:!1})})),void["mainlistme","programModeMe","auditme","reportme","tabletoolme","exploreme"].forEach((t=>{$("#"+t).css("visibility","hidden")})))),window.onpopstate=function(t){},$("#loginModal").on("keypress",(function(t){"13"==(t.keyCode?t.keyCode:t.which)&&$("#LoginGo").click()}));var M="https://script.google.com/macros/s/AKfycbx8jziXlcOJqZr6N7drNbDVdNawMdnepr22jzlx8uY/dev";let k=()=>{document.getElementById("navhtable").innerHTML=x(t)},x=t=>{let e="<span class='bt2'>";return e+="&nbsp;"+o[0][t]+"&nbsp;",e+="<span>",e};function I(t){"new"==t&&(n.newMode=!0,n.editMode=!1,$("#Instruction1").css("display","block"),$("#Instruction2").css("display","none")),"edit"==t&&(n.newMode=!1,n.editMode=!0,$("#Instruction1").css("display","block"),$("#Instruction2").css("display","none")),"neither"==t&&(n.newMode=!1,n.editMode=!1,$("#Instruction1").css("display","none"),$("#Instruction2").css("display","block"))}function P(){return n}function C(t){if(P().newMode&&-1==$("#ddeditable :selected").val())return void $("#ddeditable").addClass("addBorder");let i={vals:[]};$(".editable").each((function(e){o[e][t]=document.getElementById("texta_id"+e).value,i.vals.push(document.getElementById("texta_id"+e).value)})),1==P().newMode&&(o[4][t]=$("#ddeditable :selected").text(),o[5][t]=$("#ddeditable :selected").val(),o[6][t]=o[4][t],s.push("new")),i.vals.push(o[4][t],o[5][t],o[6][t]),$("#ddopt_"+t).text(o[0][t]),$("#auditbutton").text(o[0][t]),p(),function(t,o){$("#pleaseWaitModal").modal(),$.getJSON(M+"?callback=?",{method:"updateDesc",updatedData:JSON.stringify(t),progid:s[o],uid:e.uid},(function(t){$("#pleaseWaitModal").modal().hide(),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),t.progid&&(s[s.length-1]=t.progid)}))}(i,t),I("neither")}function w(){E(0),B("mainlistme"),g(),m()}const D=()=>{};function B(t){$("#mainlistme").removeClass("selectedMenu"),$("#programModeMe").removeClass("selectedMenu"),$("#auditme").removeClass("selectedMenu"),$("#reportme").removeClass("selectedMenu"),$("#tabletoolme").removeClass("selectedMenu"),$("#exploreme").removeClass("selectedMenu"),$("#"+t).addClass("selectedMenu")}function E(t){let e=["mainlistme","programModeMe","auditme","reportme","tabletoolme","exploreme"];e.forEach((t=>{$("#"+t).css("visibility","hidden")})),e.slice(0,t+1).forEach((t=>{$("#"+t).css("visibility","visible")}))}function T(t){$("#cancelCourseTitleEdit").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),function(){let t=P();t.newMode&&y(),t.editMode&&p(),I("neither")}()})),$("#saveCourseTitles").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),C(Number(t.currentTarget.dataset.c))})),$(".confirmBut").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),c()})),$("#editCourseTitles").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),function(t){I("edit"),b(),$("#saveCancel").css("display","block"),$(".confirmBut").css("display","none"),$("#editCourseTitles").css("display","none"),$("#deleteProgramMapping").css("display","none"),$("#resetProgramMapping").css("display","none"),$(".editable").each((function(t){$(this).html("<textarea style='font-size:24px' rows='2'  id='texta_id"+t+"'' cols='30'>"+$(this).text()+"</textarea>")}));let e=o[4][Number(t)];e=e,$("#ddeditable").html(e)}(Number(t.currentTarget.dataset.c))})),$("#resetProgramMapping").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),Number(t.currentTarget.dataset.c),$("#confirmResetModal").modal()})),$("#deleteProgramMapping").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),Number(t.currentTarget.dataset.c),$("#confirmDeleteModal").modal()}))}function N(t){var e=[];e.push(s[t]);for(var i=0;i<o.length-1;i++)e.push(o[i][t]);return e}function L(t){return"<div id='jumboparent' class='shadowbox'><div class='jumbotron' id='jumboCourse' style='display:none; width:700px; background-color:#82878D !important'><div style='position:relative; left:20px;'><table style='display:none; float:right; border-spacing: 50px !important;' border=0 id='jumboEditButtons'><tr><td><button type='button' id='editCourseTitles' style='float:left;' class='btn btn-primary' data-c='"+t+"'  data-toggle='tooltip' data-placement='left' title='Edit Titles' >Edit Titles</button></td></tr><tr><td ><button type='button' id='resetProgramMapping' style='float:left;' class='btn btn-primary' data-c='"+t+"'   data-toggle='tooltip' data-placement='left' title='Clear Program Mapping' >Clear Mapping</button></td></tr><tr><td ><button type='button' id='deleteProgramMapping' style='float:left;' class='btn btn-primary' data-c='"+t+"' data-toggle='tooltip' data-placement='left' title='Delete Course' >Delete Program</button></td></tr></table><div style='text-align:right; position:relative; top:-20px'></div><table border=0 id='jumbotable'><tr><td class='desctext'>Title</td><td class='lead editable' id='h1'>A</td><tr><tr><td class='desctext'>Summary:</td><td class='lead editable' id='h2a'>Brief Summary of Program...</td></tr><tr><td class='desctext'>Detail:</td><td class='lead editable' id='h2b'>Details of  Program...</td></tr><tr><td class='desctext'>Year Level</td><td id='h3' class='editable'>Year Level</td></tr><tr id='tdrowcurric'><td class='desctext'>Curriculum</td><td id='ddeditable'></td></tr></table><div style='text-align:left; position:relative; top:10px; left:10px'><button type='button' class='btn btn-primary confirmBut' role='button'  >Manage this Program</button></div><div id='saveCancel' style='display:none'><button type='button' style='float:right; display:block' data-c='"+t+"' id='saveCourseTitles' class='btn btn-primary'  >Update</button><button type='button' style='float:right; display:block' data-c='2' id='cancelCourseTitleEdit' class='btn btn-primary' >Cancel</button></div></div></div></div>"}$("#reportme").click((function(t){t.preventDefault(),t.stopImmediatePropagation(),h({pstate:"report"},"","?report"),h({pstate:"reportMenu"},"","?reportMenu"),g(),$("#programListTable").html(""),$("#newLoginOptions").css("display","none"),$("#reportMenuItems").css("display","block"),B("reportme")})),$("#StandardReport").click((function(i){i.preventDefault(),i.stopImmediatePropagation(),function(){B("reportme"),g();let i=t,a=o[5][i],n=o[6][i];!function(t,o,i){k();let a=e.uid;d={progid:t,curricKey:o,rootText:i,reportkey:"tablereportV1",uid:a},v("tablereportV.html")}(s[i],a,n)}()})),$("#combineReports").click((function(e){e.preventDefault(),e.stopImmediatePropagation(),function(){$("reportMenuButtons").css("display","none"),$("#reportTopicHeading").html("Combined Reports");for(var e,i=s.length,a=o[5][t],n=[],l=1;l<i;l++)a==(e=N(l))[6]&&n.push(e);console.log("possibleMergers",n)}()}))})();